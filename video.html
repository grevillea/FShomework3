<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title></title>
		<script src="js/jquery.min.js" type="application/x-javascript"></script>
		<script src="js/bootstrap.js" type="application/javascript"></script>
		<script src="https://cdn.staticfile.org/react/16.4.0/umd/react.development.js"></script>
		<script src="https://cdn.staticfile.org/react-dom/16.4.0/umd/react-dom.development.js"></script>
		<script src="https://cdn.staticfile.org/babel-standalone/6.26.0/babel.min.js"></script>
		<style>
			#outsider{
				width: 627px;
				height: 600px;
				background-color: yellow;
				padding-top: 10px;
				float: left;
			}
			#insider{
				width: 588px;
				height: 440px;
				background-color: dodgerblue;
				margin-top: 10px;
				margin-left: 20px;
				position: relative;
			}
			#like{
				display: inline-block;
			}
			#dislike{
				display: inline-block;
			}
			#play{
				margin-top: 10px;
				margin-left: 20px;
			}
			#playlist{
				width: 627px;
				height: 600px;
				background-color: yellow;
				padding-top: 10px;
				float: left;
				display: inline-block;
			}
			.list{
				margin-left: 20px;
			}
			.play-list{
			color: #00b050;
			font-size: 18px;
			}
			.play-list li{
				display: flex;
				align-items: center;
				height: 70px;
				cursor: pointer;
			}
			#progressWrap{
		    background-color: #2f75b5;
		    height: 25px;
		    cursor: pointer;
			}
			#playProgress{
			    background-color: red;
			    width: 0px;
			    height: 25px;
			    border-right: 2px solid #2f75b5;
			}
			#showProgress{
			    font-weight: 600;
			    font-size: 20px;
			    line-height: 25px;
			}
			@media (min-width: 768px){
				.right-video-box{
					margin-top: 20px;
				}
			}
			video{
				width: 100%;
				height: 100%;
				background-size:100% 100%;  
			}
			img{
				width: 60px;
				height: 60px;
			}
			#addUrl{
				width: 1200px;
				float: left;
			}
			#addV{
				background-color: cornflowerblue;
			}
			#title{
				background-color: yellow;
			}
			#url{
				background-color: yellow;
			}
			.edi{
				background-color: cornflowerblue;
			}
			.del{
				background-color: cornflowerblue;
			}
			.aprv{
				background-color: cornflowerblue;
			}
		</style>
	</head>
	<body>
		<div id="outsider"></div>
		<script type="text/babel">
			function Player(props) {
			    return 	(<div id="insider">
							<video id="video">
							<source src="video/movie.mp4" type="video/mp4"></source></video>
						</div>);
			}
			function Controls(props){
				return 	(
					<div>
					    <img src="img/play.png" id="play"/>
						<img src="img/pause.png" id="pause"/>
						<img src="img/add.png" id="add"/>
						<img src="img/min.png" id="min"/>
						<img src="img/stop.png" id="stop"/>
						<img src="img/listen.png" id="listen"/>
						<img src="img/like.png" id="likePic" />
						<div id="like" >200</div>
						<img src="img/dislike.png" id="dislikePic" />
						<div id="dislike" >50</div>
						<div id="progressWrap">
					        <div id="playProgress">
					            <span id="showProgress"></span>
					        </div>
						</div>
					</div>		
				);
			}
			function Playlist(props){
				return (<div id="playlist">
							<ul className="play-list">
								<li id="video1" src="video/movie1.mp4">
									<img src="img/play.png"/>
									<p>Introduction to HTML5</p>
								</li>
								<li id="video2" src="video/movie.mp4">
									<img src="img/play.png"/>
									<p>Introduction to Styling with CSS3</p>
								</li>
								<li id="video3" src="video/movie.mp4">
									<img src="img/play.png"/>
									<p>Introduction to Bootstrap 4</p>
								</li>
								<li id="video4" src="video/movie.mp4">
									<img src="img/play.png"/>
									<p>Learn to create website with HTML5, CSS3 and Bootstrap4</p>
								</li>
								<li id="video5" src="video/movie.mp4">
									<img src="img/play.png"/>
									<p>Introduction to Javascript</p>
								</li>
							</ul>
						</div>);
			}
			function AddInput(props){
				return(
					<table>
						<tbody>
						<tr>
							<td>Title:</td>
							<td>
								<input type="text" id="title"/>
							</td>
						</tr>						
						<tr>
							<td>Youtube URL:</td>
							<td>
								<input type="url" id="url"/>
							</td>
						</tr>
						<tr>
							<td></td>
							<td>
								<input type="button" value="Add Video" id="addV" />
							</td>
						</tr>
						</tbody>
					</table>
				);
			}
			function AddTitle(props){
				return(
					<table>
						<tbody>
						<tr>
							<td width="100px">S.no</td>
							<td width="250px">Title</td>
							<td width="400px">URL</td>
							<td width="100px">Edit</td>
							<td width="100px">Delete</td>
							<td width="100px">Approve</td>
						</tr>
						</tbody>
					</table>
				);
			}
			function AddList(props){
				return(
					<table id="add-list">
						<tbody>
						<tr>
							<td width="100px">0</td>
							<td width="250px">Sadhguru and Physics</td>
							<td width="400px">
								<a href="#" >https://www.youtube.com/watch?v=pAluQXDTM9g</a>
							</td>
							<td width="100px">
								<input type="button" id="editBtn_1" value="Edit" className="edi"/>
							</td>
							<td width="100px">
								<input type="button" id="delBtn_1" value="Delete" className="del" />
							</td>
							<td width="100px">
								<input type="button" id="Approve_1" value="Approve" className="aprv"/>
							</td>
						</tr>
						<tr>
							<td width="100px">1</td>
							<td width="250px">Angular 6 Tutorial</td>
							<td width="400px">
								<a href="#" >https://www.youtube.com/watch?v=BoxuTR4ruUs</a>
							</td>
							<td width="100px">
								<input type="button" id="editBtn_1" value="Edit" className="edi"/>
							</td>
							<td width="100px">
								<input type="button" id="delBtn_1" value="Delete" className="del" />
							</td>
							<td width="100px">
								<input type="button" id="Approve_1" value="Approve" className="aprv"/>
							</td>
						</tr>
						<tr>
							<td width="100px">2</td>
							<td width="250px">Nikon P900 83X Zoom</td>
							<td width="400px">
								<a href="#" >https://www.youtube.com/watch?v=m7kdx9b_Jvk</a>
							</td>
							<td width="100px">
								<input type="button" id="editBtn_1" value="Edit" className="edi"/>
							</td>
							<td width="100px">
								<input type="button" id="delBtn_1" value="Delete" className="del" />
							</td>
							<td width="100px">
								<input type="button" id="Approve_1" value="Approve" className="aprv"/>
							</td>
						</tr>
						<tr>
							<td width="100px">3</td>
							<td width="250px">Understanding Javascript</td>
							<td width="400px">
								<a href="#" >https://www.youtube.com/watch?v=Bv_5Zv5c-Ts</a>
							</td>
							<td width="100px">
								<input type="button" id="editBtn_1" value="Edit" className="edi"/>
							</td>
							<td width="100px">
								<input type="button" id="delBtn_1" value="Delete" className="del" />
							</td>
							<td width="100px">
								<input type="button" id="Approve_1" value="Approve" className="aprv"/>
							</td>
						</tr>
						</tbody>
					</table>
				);
			}
			function AddVideo(props){
				return(
					<div id="addUrl">
						<AddInput />
						<AddTitle />
						<AddList />
					</div>
				);
			}
			class Content extends React.Component {
				constructor(props) {
			      super(props);
			      this.state = {id: '1', titleName: '2',link:'3'};
			      this.handleChange = this.handleChange.bind(this);
			  }
				handleChange(event){
					this.setState({id:event.target.id,titleName:event.target.titleName,link:event.target.link});
				}
				  componentDidMount() {
				    fetch('json/playList.json')
				    .then(res=>{return res.json();})
				    .then(data=>{console.log(JSON.stringify(data));console.log(data.test1);})
				    .catch(e=>{console.log(e.message);});
				  }
				  render(){
				  	return(
					<div id="addUrl">
						<AddInput />
						<AddTitle />
						<AddList />
					</div>);
				  }
			}
			function App() {
			    return (
			    <div>
			        <Player />
			        <Controls />
			        <Playlist />
			        <Content />
			    </div>
			    );
			}
			ReactDOM.render(
			     <App />,
			    document.getElementById('outsider')
			);
			var video = document.getElementById('video');
	        var progressWrap = document.getElementById("progressWrap");
	        var playProgress = document.getElementById("playProgress");
			if(sessionStorage.like){
				$('#like').html(sessionStorage.like);
			}
			if(sessionStorage.dislike){
				$('#dislike').html(sessionStorage.dislike);
			}
			video.volume = 0.1;
			$('#play').click(function(){
				$('#video').trigger('play');
				progressFlag = setInterval(getProgress, 60);
			})
			$('#pause').click(function(){
				$('#video').trigger('pause');
				clearInterval(progressFlag);
				console.log(video.duration)
				console.log(video.currentTime)
			})
			$('#add').stop().click(function(){
				if(video.volume!=1.0){
					video.volume +=0.1;
				}
			})
			$('#min').click(function(){
				if(video.volume!=0.0){
					video.volume -=0.1;
				}
			})
			$('#stop').click(function(){
				video.autoplay=true;
				video.load();
			})
			$('#listen').click(function(){
				console.log(video.defaultMuted)
				video.defaultMuted =!video.defaultMuted;
				if(video.defaultMuted){
					video.volume =0.0;
				}else{
					video.volume =0.5;
				}
			})
			$('#likePic').click(function(){
				console.log($('#like').html())
				var  aa = Number($('#like').html())+1;
				$('#like').html(aa);
				var  like = Number($('#like').html());
				sessionStorage.setItem("like", like);
			})
			$('#dislikePic').click(function(){
				console.log($('#dislike').html());
				var  aa = Number($('#dislike').html())-1;
				if(aa<0){
					return;
				}
				$('#dislike').html(aa);
				var  nolike = Number($('#dislike').html());
				sessionStorage.setItem("dislike",nolike);
			})
        // video的播放条
        function getProgress(){
            var percent = video.currentTime / video.duration;
            playProgress.style.width = percent * (progressWrap.offsetWidth) - 2 + "px";
//          showProgress.innerHTML = (percent * 100).toFixed(1) + "%";
        }
        // 鼠标在播放条上点击时进行捕获并进行处理
        function videoSeek(e){
            if(video.paused || video.ended){
                play();
                enhanceVideoSeek(e);
            }
            else{
                enhanceVideoSeek(e);
            }

        }
        function enhanceVideoSeek(e){
            clearInterval(progressFlag);
            var length = e.pageX - progressWrap.offsetLeft;
            var percent = length / progressWrap.offsetWidth;
            playProgress.style.width = percent * (progressWrap.offsetWidth) - 2 + "px";
            video.currentTime = percent * video.duration;
            progressFlag = setInterval(getProgress, 60);
        }
        $('.play-list').find('li').each(function() {
            $(this).click(function() {
                console.log(video.currentSrc);
				var src = $(this).attr("src");
				video.src=src;
				video.play();
            })
        })
        $("#addV").click(function(){
 	    	var title = $("#title").val();
	    	var urll = $("#url").val();
			var template = "<tr ><td width='100px'>"+5+"</td><td width='250px'>"+title+"</td><td width='400px'><a href='%23'>"+urll+"</a></td><td width='100px'><input type='button' value='Edit' class='edi'/></td><td width='100px'><input type='button' value='Delete' class='del' onclick='deleterow(this)'/></td><td width='100px'><input type='button' value='Approve' class='aprv'/></td></tr>";
			$("#add-list").append(template);
		})       	
		</script>
	</body>
</html>
